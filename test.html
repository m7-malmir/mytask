<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>آپلود عکس تستی</title>
</head>
<body>
    <h1>آپلود عکس تستی به file.io</h1>
    
    <input type="file" id="photoInput" accept="image/*">
    <button id="uploadBtn">آپلود</button>
    
    <p id="status"></p>
    <img id="preview" style="max-width: 300px; display: none; margin-top: 10px;">

    <script>
    document.getElementById('uploadBtn').addEventListener('click', async () => {
        const fileInput = document.getElementById('photoInput');
        const status = document.getElementById('status');
        const preview = document.getElementById('preview');

        if (!fileInput.files.length) {
            alert("لطفاً یک عکس انتخاب کنید.");
            return;
        }

        const formData = new FormData();
        formData.append("file", fileInput.files[0]);

        status.textContent = "در حال آپلود...";

        try {
            const response = await fetch("https://file.io", {
                method: "POST",
                body: formData
            });

            const result = await response.json();
            if (result.success) {
                status.innerHTML = `✅ آپلود شد! <a href="${result.link}" target="_blank">مشاهده فایل</a>`;
                preview.src = URL.createObjectURL(fileInput.files[0]);
                preview.style.display = "block";
            } else {
                status.textContent = "❌ آپلود ناموفق بود.";
            }
        } catch (error) {
            console.error(error);
            status.textContent = "❌ خطا در آپلود.";
        }
    });
    </script>
</body>
</html>
